<div class="main-content">
    <form [formGroup]="specimenForm" (ngSubmit)="onSubmit()" id="registerSpecimen" class="form">
        
        <section class="form-section">
            <header class="form-section-header">
                <button #toggleBtn type="button" class="toggle-btn" aria-expanded="true" data-target="identificacion" (click)="toggleSection($event, 0)">
                    <span class="toggle-icon"><mat-icon>keyboard_arrow_down</mat-icon></span>
                    <h2>Identificación</h2>
                </button>
            </header>
            <div #sectionBody class="form-section-body showed" id="identificacion">
                <div class="form-group disabled-group">
                    <label for="numInventario">Número de inventario:</label>
                    <input 
                        type="text" 
                        id="numInventario" 
                        name="numInventario" 
                        required
                        formControlName="numInventario"> </div>
                <div class="form-group">
                    <label for="nombreEspecimen">Nombre de espécimen:</label>
                    <input 
                        type="text" 
                        id="nombreEspecimen" 
                        name="nombreEspecimen"
                        formControlName="nombreEspecimen"> </div>
                <div class="form-group">
                    <label for="fechaIngreso">Fecha de ingreso:</label>
                    <input 
                        type="date" 
                        id="fechaIngreso" 
                        name="fechaIngreso" 
                        required
                        formControlName="fechaIngreso"> </div>
            </div>
        </section>

        <section class="form-section">
            <header class="form-section-header">
                <button #toggleBtn type="button" class="toggle-btn" aria-expanded="false" data-target="clasificacion_taxonomica" (click)="toggleSection($event, 1)">
                    <span class="toggle-icon"><mat-icon>keyboard_arrow_down</mat-icon></span>
                    <h2>Clasificación taxonómica</h2>
                </button>
            </header>
            <div #sectionBody class="form-section-body" id="clasificacion_taxonomica">
                <div class="form-group">
                    <label for="genero">Género:</label>
                    <input 
                        type="text" 
                        id="genero" 
                        name="genero" 
                        required
                        formControlName="genero"> </div>
                <div class="form-group">
                    <label for="especieNombre">Especie:</label>
                    <input 
                        type="text" 
                        id="especieNombre" 
                        name="especieNombre" 
                        required
                        formControlName="especieNombre"> </div>
            </div>
        </section>
        
        <section class="form-section">
            <header class="form-section-header">
                <button #toggleBtn type="button" class="toggle-btn" aria-expanded="false" data-target="informacion_de_procedencia" (click)="toggleSection($event, 2)">
                    <span class="toggle-icon"><mat-icon>keyboard_arrow_down</mat-icon></span>
                    <h2>Información de procedencia</h2>
                </button>
            </header>
            <div #sectionBody class="form-section-body" id="informacion_de_procedencia">
                <div class="form-group">
                    <label for="origenAltaId">Origen:</label>
                    <select 
                        id="origenAltaId" 
                        name="origenAltaId" 
                        required
                        formControlName="origenAltaId"> <option value="1">Donación</option>
                        <option value="2">Rescate</option>
                        <option value="3">Incautado</option>
                        <option value="4">Abandono</option>
                        <option value="5">Captura</option>
                        <option value="6">Depositaria</option>
                        <option value="7">Intercambio</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="procedencia">Procedencia:</label>
                    <input 
                        type="text" 
                        id="procedencia" 
                        name="procedencia" 
                        required
                        formControlName="procedencia"> </div>
            </div>
        </section>

        <section class="form-section">
            <header class="form-section-header">
                <button #toggleBtn type="button" class="toggle-btn" aria-expanded="false" data-target="ubicacion_actual" (click)="toggleSection($event, 3)">
                    <span class="toggle-icon"><mat-icon>keyboard_arrow_down</mat-icon></span>
                    <h2>Ubicación actual</h2>
                </button>
            </header>
            <div #sectionBody class="form-section-body" id="ubicacion_actual">
                <div class="form-group disabled-group">
                    <label for="areaOrigen">Área origen:</label>
                    <select 
                        id="areaOrigen" 
                        name="areaOrigen" 
                        required
                        formControlName="areaOrigen"> <option value="Externo">Externo</option>
                    </select>
                </div>
                <div class="form-group disabled-group">
                    <label for="areaDestino">Área destino:</label>
                    <select 
                        id="areaDestino" 
                        name="areaDestino" 
                        required
                        formControlName="areaDestino"> <option value="Cuarentena">Cuarentena</option>
                        <option value="Exhibición">Exhibición</option>
                        <option value="Guardería">Guardería</option>
                    </select>
                </div>
                <div class="form-group disabled-group">
                    <label for="ubicacionOrigen">Ubicación origen:</label>
                    <input 
                        type="text" 
                        id="ubicacionOrigen" 
                        name="ubicacionOrigen" 
                        required
                        formControlName="ubicacionOrigen"> </div>
                <div class="form-group disabled-group">
                    <label for="ubicacionDestino">Ubicación destino:</label>
                    <input 
                        type="text" 
                        id="ubicacionDestino" 
                        name="ubicacionDestino" 
                        required
                        formControlName="ubicacionDestino"> </div>
            </div>
        </section>

        <section class="form-section">
            <header class="form-section-header">
                <button #toggleBtn type="button" class="toggle-btn" aria-expanded="false" data-target="informacion_descriptiva" (click)="toggleSection($event, 4)">
                    <span class="toggle-icon"><mat-icon>keyboard_arrow_down</mat-icon></span>
                    <h2>Información descriptiva</h2>
                </button>
            </header>
            <div #sectionBody class="form-section-body" id="informacion_descriptiva">
                <div class="form-group form-notes">
                    <label for="observacionAlta">Observaciones de ingreso:</label>
                    <textarea 
                        id="observacionAlta" 
                        name="observacionAlta" 
                        rows="4" 
                        placeholder="Describa características especiales del animal..."
                        formControlName="observacionAlta"> </textarea>
                </div>
            </div>
        </section>

        <div class="form-actions">
            <button type="submit" class="btn btn-submit" id="submitBtn" [disabled]="isSaving">
                {{ isSaving ? 'Guardando...' : 'Agregar' }}
            </button>
            <a href="javascript:history.back()" class="btn-reset">
                Cancelar
            </a>
        </div>
    </form>
</div>